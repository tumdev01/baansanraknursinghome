!function(s,e,n,t){function i(e){var n,t;if(e.data.message){if((t=s("#secupress-sessions-control-notice")).length)return t.removeClass("updated error").addClass(e.success?"updated":"error"),t.children("p").remove(),void t.prepend("<p>"+e.data.message+"</p>");n=s(".wrap > h1").first(),(t=s('<div id="secupress-sessions-control-notice" class="updated notice is-dismissible"><p></p></div>')).children("p").html(e.data.message),n.length||(n=s(".wrap > h2").first()),n.length?n.after(t):s(".wrap").first().prepend(t),spSessionsControlL10n.hasDismissibleNotices&&s("#secupress-sessions-control-notice").each(function(){var e=s(this),n=s('<button type="button" class="notice-dismiss"><span class="screen-reader-text"></span></button>'),t=commonL10n.dismiss||"";n.find(".screen-reader-text").text(t),n.on("click.wp-dismiss-notice",function(s){s.preventDefault(),e.fadeTo(100,0,function(){e.slideUp(100,function(){e.remove()})})}),e.append(n)})}}spSessionsControlL10n.userId=Number(spSessionsControlL10n.userId),s(".bulkactions select").append('<option value="secupress-destroy-user-sessions">'+spSessionsControlL10n.destroySessionsText+"</option>"),s(".bulkactions select").first().closest("form").on("submit.secupress",function(e){var n,t=s(this),r=t.find('[type="submit"]'),o={action:"secupress-destroy-user-sessions",_wpnonce:spSessionsControlL10n.bulkNonce,users:[]},a=!1;r.first().attr("disabled")||(n=t.serializeArray(),s.each(n,function(s,e){"action"!==e.name&&"action2"!==e.name||"secupress-destroy-user-sessions"!==e.value?"users[]"===e.name&&e.value&&o.users.push(Number(e.value)):a=!0}),!a||o.users?a&&(r.attr({disabled:"disabled","aria-disabled":!0}),e.preventDefault(),s.getJSON(ajaxurl,o).done(function(e){s.isPlainObject(e)&&e.data&&(e.success&&s.each(e.data.ids,function(e,n){s("#user-"+n).closest("tr").each(function(){var e=Number(this.id.replace(/^user-/,"")),n=e===spSessionsControlL10n.userId?spSessionsControlL10n.currentUserCellText:spSessionsControlL10n.otherUsersCellText;s(this).children(".column-secupress-sessions").html("<em>"+n+"</em>"),s(this).find("#user_"+e).prop("checked",!1)})}),i(e))}).always(function(){r.removeAttr("disabled aria-disabled")})):e.preventDefault())}).find('[type="submit"]').removeAttr("disabled aria-disabled")}(jQuery,document,window);
