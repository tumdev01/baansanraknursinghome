"use strict";(self.webpackJSONPwpmdb=self.webpackJSONPwpmdb||[]).push([[922],{3922:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var i=n(987),l=n(9255),a=n(6484),s=n(7081),r=n(3144),c=n(9764),o=n(8346),p=n.n(o),u=n(3963),m=n(6500),d=n(6508),_=n.n(d);const g=(0,s.Ng)((e=>({theme_plugin_files:e.theme_plugin_files,panel_info:e.panels,local_version:e.migrations.local_site.theme_plugin_files_version})),{})((e=>{var t="",n=e.theme_plugin_files,i=e.panelsOpen,s=e.selected,r=e.items,c=e.type;if(!_()(i,c)&&(n[c]||{}).enabled){if(t=e.summary,["other_files","muplugin_files"].includes(c)){if(0===s.length)return l.createElement("span",{className:"empty-warning"},(0,a.__)("Empty selection","wp-migrate-db"));var o=[];r.forEach((e=>{s.includes(e.path)&&o.push(e.name)})),t=o.join(", ")}"core_files"===c&&(t=(0,a.__)("Export all Core files","wp-migrate-db"))}return l.createElement(l.Fragment,null,(0,u.Ay)(t))}));var h=n(8349),f=n(7431),v=n(1319),b=n(3048),E=n(3641),w=n(7853),y=n(4829),x=n(1409),O=n(7085);function P(e,t,n,i,l){var a=((e,t,n)=>{var i=[];if("object"===typeof t){var l=Object.values(t).map((e=>e[0].path));"selected"===n["".concat(e,"_option")]&&n["".concat(e,"_selected")].forEach((e=>{l.includes(e)&&i.push(e)})),"except"===n["".concat(e,"_option")]&&n["".concat(e,"_excluded")].forEach((e=>{l.includes(e)&&i.push(e)})),"active"===n["".concat(e,"_option")]&&Object.values(t).forEach((e=>{e[0].active&&i.push(e[0].path)})),"all"===n["".concat(e,"_option")]&&(i=l)}return i})(i,l.site_details[i],e),s={themes:"theme_files",plugins:"plugin_files",muplugins:"muplugin_files",others:"other_files",core:"core_files"},r=(e[s[i]]||{}).enabled;return{enabled:void 0!==r&&r,isOpen:t.includes(s[i]),selected:a,selectionEmpty:p()(n,{name:"SELECTED_".concat(i.toUpperCase(),"_EMPTY")})}}const A=(e,t)=>{var n=e.theme_plugin_files,i=e.panelsOpen,o=e.current_migration,p=e.remote_site,d=e.local_site,_=o.status,A=o.intent,S=(0,v.d)(e),N=(0,s.wA)(),C=t.title,j=t.type,F=t.panel_name,T=t.items,k=()=>"savefile"===A?T:(0,x.Al)()?T.filter((e=>!1===e.path.includes("wpe-site-migration"))):T.filter((e=>!1===e.path.includes("wp-migrate-db"))),L=T.map((e=>e.path)),I=!1,W={push:"Push",pull:"Pull",savefile:"Export"},G={all:(0,a.nv)((0,a.__)("%s all %s","wp-migrate-db"),W[A],j),active:(0,a.nv)((0,a.__)("%s only active %s","wp-migrate-db"),W[A],j),selected:(0,a.nv)((0,a.__)("%s only selected %s","wp-migrate-db"),W[A],j),except:(0,a.nv)((0,a.__)("%s all %s <b>except</b> those selected","wp-migrate-db"),W[A],j)},J=P(n,i,_,j,"pull"===A?p:d),M=J.enabled,R=J.isOpen,U=J.selected,Z=J.selectionEmpty;(0,l.useEffect)((()=>{"select"===n["".concat(j,"_option")]&&N(e.updateSelected(U,j)),"except"===n["".concat(j,"_option")]&&e.updateExcluded(U,j)}),[]),M&&!R&&(I=!0);var D=[],V="selected"===n["".concat(j,"_option")]||"except"===n["".concat(j,"_option")];I&&D.push("has-divider"),M&&D.push("enabled");var z={muplugins:(0,a.__)("Select any must-use plugins to be included in the migration.","wp-migrate-db"),others:(0,a.__)("Select any other files and folders found in the <code>wp-content</code> directory to be included in the migration.","wp-migrate-db"),core:(0,a.__)("Including WordPress core files ensures that the exported archive contains the exact version of WordPress installed on this site, which is helpful when replicating the site in a new environment. ","wp-migrate-db")},Q=(0,x.Ri)(F,o,d,p);return l.createElement(m.A,{title:C,className:D.join(" "),panelName:F,disabled:S,writable:Q,enabled:M,forceDivider:I,callback:t=>(0,b.Qi)(t,F,R,M,S,e.addOpenPanel,e.removeOpenPanel,(()=>N((0,r.m6)(F)))),toggle:(0,r.m6)(F),hasInput:!0,bodyClass:"tpf-panel-body",panelSummary:l.createElement(g,(0,c.A)({},e,{disabled:S,items:k(),selected:U,title:C,type:F,summary:G[n["".concat(j,"_option")]]}))},l.createElement("div",null,["others","muplugins","core"].includes(j)&&l.createElement("p",{className:"panel-instructions"},(0,u.Ay)(z[j]),"core"===j&&l.createElement(O.A,{link:"https://deliciousbrains.com/wp-migrate-db-pro/doc/full-site-exports/",content:(0,a.__)("Learn When to Include Core Files","wp-migrate-db"),utmContent:"wordpress-core-files-panel",utmCampaign:"wp-migrate-documentation",anchorLink:"wordpress-core-files"})),!["others","muplugins","core"].includes(j)&&l.createElement(E.A,{ariaLabel:(0,a.nv)((0,a.__)("%s options","wp-migrate-db"),j),optionChoices:G,intent:"push",type:j,value:n["".concat(j,"_option")],updateOption:r.ZR}),"core"!==j&&l.createElement(w.A,{id:"".concat(j,"-multiselect"),options:k(),extraLabels:"",stateManager:t=>{"except"===n["".concat(j,"_option")]&&e.updateExcluded(t,j),e.updateSelected(t,j)},selected:U,visible:!0,disabled:!V,updateSelected:t=>{var i=t.map((e=>e.path));"except"===n["".concat(j,"_option")]?e.updateExcluded(i,j):e.updateSelected(i,j)},selectInverse:()=>"except"===n["".concat(j,"_option")]?(0,f.A)(e.updateExcluded,L,U,j):(0,f.A)(e.updateSelected,L,U,j),showOptions:V,type:j,themePluginOption:n["".concat(j,"_option")]})),"core"!==j&&l.createElement("div",{className:"excludes-wrap"},l.createElement(h.A,(0,c.A)({},e,{excludes:n["".concat(j,"_excludes")],excludesUpdater:e.updateExcludes,type:j}))),Z&&"selected"===n["".concat(j,"_option")]&&l.createElement(y.A,{type:"danger"},(0,a.nv)((0,a.__)("Please select at least one %s for migration","wp-migrate-db"),{themes:"theme",plugins:"plugin",muplugins:"must-use plugin",others:"file or directory",core:"file or directory"}[j])),Z&&"except"===n["".concat(j,"_option")]&&l.createElement(y.A,{type:"danger"},(0,a.nv)((0,a.__)("Please select at least one %s to exclude from migration","wp-migrate-db"),"themes"===j?"theme":"plugin")))};var S=n(1581),N=(n(6618),n(4642)),C=n(583);function j(e,t){var n={};return["themes","plugins","muplugins","others","core"].forEach(((l,a)=>{var s="pull"===t?e.remote_site.site_details[l]:e.local_site.site_details[l],r="pull"===t||"savefile"===t?e.local_site.site_details[l]:e.remote_site.site_details[l],c=s,o=[],p=e=>{if(r){var t=r[e];if(t&&t[0].hasOwnProperty("version"))return t[0].version}return null};for(var u in c){var m=c[u];if(m){var d={name:m[0].name,path:m[0].path};["plugins","themes"].includes(l)&&"savefile"!==t&&(d=(0,i.A)((0,i.A)({},d),{},{active:m[0].active,sourceVersion:m[0].version,destinationVersion:p(u)})),o.push(d)}}return n[l]=o})),n}var F=e=>{var t=j(e,e.current_migration.intent).themes;return A(e,{title:(0,a.__)("Themes","wp-migrate-db"),type:"themes",panel_name:"theme_files",items:t})},T=e=>{var t=j(e,e.current_migration.intent).plugins;return A(e,{title:(0,a.__)("Plugins","wp-migrate-db"),type:"plugins",panel_name:"plugin_files",items:t})},k=e=>{var t=j(e,e.current_migration.intent).muplugins;return 0===t.length?null:A(e,{title:(0,a.__)("Must-Use Plugins","wp-migrate-db"),type:"muplugins",panel_name:"muplugin_files",items:t})},L=e=>{var t=j(e,e.current_migration.intent).others;return 0===t.length?null:A(e,{title:(0,a.__)("Other Files","wp-migrate-db"),type:"others",panel_name:"other_files",items:t})},I=e=>{var t=e.current_migration.intent,n=j(e,t).core;return"savefile"!==t||0===n.length?null:A(e,{title:(0,a.__)("WordPress Core Files","wp-migrate-db"),type:"core",panel_name:"core_files",items:n})};const W=(0,s.Ng)((e=>{var t=(0,S.jG)("current_migration",e),n=(0,S.jG)("local_site",e),i=(0,S.jG)("remote_site",e),l=(0,N.o)("panelsOpen",e),a=(0,S.ud)("stages",e),s=(0,S.w1)("status",e);return{theme_plugin_files:e.theme_plugin_files,current_migration:t,local_site:n,remote_site:i,panelsOpen:l,stages:a,status:s}}),{toggleThemePluginFiles:r.m6,updateTPFOption:r.ZR,updateSelected:r.JE,updateExcluded:r.mf,togglePanelsOpen:C.SZ,addOpenPanel:C._t,removeOpenPanel:C.Tz,updateExcludes:r.tl})((e=>l.createElement("div",{className:"theme-plugin-files"},l.createElement(F,e),l.createElement(T,e),l.createElement(k,e),l.createElement(L,e),l.createElement(I,e))))}}]);